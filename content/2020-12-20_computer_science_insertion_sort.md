# Сортировка вставка

Один из самых простых алгоритмов сортировки, выполняется за O(n^2).

[computer science](./meta_computer_science.md)

[алгоритмы сортировки](./meta_algoritmy_sortirovki.md)


### Основная идея

Мы постоянно вытаскиваем по одному элементу из исходного массива и вставляем
его на подходящую позцию в отсортированный массив. 

### Реализация на python

```python
from typing import List

unsorted_array = [72, 56, 2, 6, 98, 30, 60, 23, 53, 22, 0, 99, 14]
sorted_array = [0, 2, 6, 14, 22, 23, 30, 53, 56, 60, 72, 98, 99]


def insertion_sort(original_array: List[int]) -> List[int]:
    array = original_array.copy()

    for i in range(len(array)):
        value = array[i]
        j = i - 1
        while array[j] > value and j >= 0:
            array[j + 1] = array[j]
            j -= 1
            
        array[j + 1] = value
        
    return array


assert insertion_sort(unsorted_array) == sorted_array
```

### На что обратить внимание

1. Создаётся впечатление, что процесс вставки можно улучшить применением
бинарного поиска. Это действительно может дать ускорение, но оно будет не столь
существенным т.к. основная проблема алгоритма - необходимость двигать элементы
вперёд и назад при вставке нового значения.
1. Основной механизм сортировки это собственно вставки элементов. 
Мы выбираем новый элемент как array\[i] и знаем, что слева от него ужё всё
отсортировано. Очень важно сохранить значение этого элемента в отдельную переменную.
После этого сравниваем все элементы левее него и двигаем их вправо если они больше.
На этом этапе мы ужё перезатёрли сам исходный элемент. Потом мы уменьшаем индекс
j до тех пор пока не найдём подходящее место для вставки элемента, на этом
внутренний цикл заканчивается. Очень важно не забыть вставить элемент из временной
переменной. 
