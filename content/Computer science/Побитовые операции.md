# Побитовые операции

Манипуляции с конкретными битами.

---

Теги:

- [Computer Science](../_tags/computer%20science.md)
- [Программирование](../_tags/программирование.md)
- [Математика](../_tags/математика.md)
- [Побитовые операции](../_tags/побитовые%20операции.md)
- [Вычисления](../_tags/вычисления.md)
- [Python](../_tags/python.md)

---

### Основная идея

Побитовые операции это логические операции над конкретными битами в бинарном
представлении чисел. Не следует путать логические операции с побитовыми. Когда
речь идёт о логических операциях, имеются в виду операции высокого уровня,
например "1 И 2 = 1". Побитовые же операции манипулируют компонентами чисел,
например "1 & 2 = 0" т.к. "01 & 10 = 0".

### Логическое НЕ

Меняет значения бита на противоположное.

a   | not a
:---:|:---:
1    | 0
0    | 1

### Логическое И

Возвращает истину если оба аргумента истинны. Аналог умножения.

a   | b   | a and b
:---:|:---:|:---:
0    | 0   | 0
0    | 1   | 0
1    | 0   | 0
1    | 1   | 1

### Логическое ИЛИ

Возвращает истину если хоть один аргумент истинен. Аналог сложения.

a   | b   | a or b
:---:|:---:|:---:
0    | 0   | 0
0    | 1   | 1
1    | 0   | 1
1    | 1   | 1

### Исключающее ИЛИ (ещё называется ЛИБО)

Возвращает истину если сумма аргументов нечётна. Работает как ИЛИ, но если оба
входных значения истинны вернёт 0.

a   | b   | a xor b
:---:|:---:|:---:
0    | 0   | 0
0    | 1   | 1
1    | 0   | 1
1    | 1   | 0

Является обратимой:
(x XOR y) XOR y = x

Это свойство может использоваться для обмена значениями между переменными, если
в языке не предусмотрен соответствующий механизм.

### Битовые сдвиги

Представляют собой смещения значащих цифр числа влево или вправо. Могут
выполняться разными способами.

1. Логический — простое смещение, значения конкретных битов могут теряться.
1. Арифметический — аналогичен логическому, кроме крайнего левого бита. Он
   принят за обозначения знака числа (положительное или отрицательное) и не
   подвергается манипуляциям.
1. Циклический — вытолкнутые биты переносятся на противоположную сторону числа.

Пример сдвига вправо на 3 разряда: '0b11000' >> 3 = '0b11' Пример сдвига влево
на 3 разряда: '0b11000' << 3 = '0b11000000'

По своей сути сдвиги можно рассматривать как операции деления или умножения на
основание системы исчисления. Для двоичных чисел это 2, для десятичных это 10.

Например, десятичный сдвиг влево: 10 << 3 = 10000. Равносильно умножению на 10
в 3-й степени.

### Взвести конкретный бит числа

Без исходного значения:

```python
x = 1 << 4
print(bin(x))  # вернёт  '0b10000'
```

С исходным значением:

```python
x = 26
print(bin(x))  # вернёт  '0b11010'
y = 1 << 2
x = x | y
print(bin(x))  # вернёт  '0b11110'
```

### Проверить конкретный бит числа

```python
x = 26
print(bin(x))  # вернёт  '0b11010'
y = 1 << 2
print(bin(x & y))  # вернёт  '0b0'
y = 1 << 1
print(bin(x & y))  # вернёт  '0b10'
```

### Законы Де Моргана

По своей сути похожи на внесение множителя -1 в скобки.

Описываются равенствами:

```
not (a and b) = (not a) or (not b)
not (a or b) = (not a) and (not b)
```

При их использовании and и or меняются местами, а сами операнды отрицаются.
